<% provide(:title, @project.name) %>
<div class="container">
  <div class="row">
    <h1><%= @project.name %></h1>
    </div>
    <div class="row">
      <div class="col-xs">Project Summary:</div>
      <div class="col-xl"><%= @project.summary %></div>
    </div>
    <div class="row">
      <div class="col-xs">Total time:</div>
      <div class="col-xl">
        <%= pluralize(@project.tasks.sum(:time), "minute")%>
      </div>
      </div>
      <div class="row">
        <div class="col-xs">Precentage Complete:</div>
        <div class="col-xl">
          <div class="progress-bar progress-bar-success"
              role="progressbar"
              aria-value-now="<%= @project.precentage_complete %>"
              aria-valuemin="0", aria-valuemax="100"
              style="width:<%= @project.precentage_complete %>">
        </div>
      </div>
      </div>


    <div class="row">
      <% if @project.tasks.present? %>
      <table class="table table-hover">
        <thead class="thead-dark">

          <th>
            Task completed on:
            </th>
            <th>
              Comments:
              </th>
              <th>
                Time:
                </th>
                <% if current_user.admin? %>
                <th>
                  Collaborator(s):
                  </th>
                <th>
                   Edit:
                  </th>
                  <% end %>
          </thead>

      <tbody>
      <% @tasks.each do |tsk| %>
      <tr>
        <td><%= tsk.day %></td>
        <td>  <%= tsk.comments %>  </td>
        <td><%= tsk.time %></td>
        <% if current_user.admin %>
        <td><%= User.find_by(id: tsk.user_ids).email %></td>
        <td><%= link_to "Edit", edit_task_path(tsk) %></td>
        <% end %>
      </tr>
      <% end %>
        </tbody>
              </table>
        <% else %>
        <h2>This project has no completed tasks yet.</h2>
      <% end %>

    </div>
    </div>
