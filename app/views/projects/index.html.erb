<% provide(:title, "All Projects") %>
<div class="container">
  <div class="row">
<table class="table table-hover">
  <thead class="thead-dark">
    <tr>
      <th>
        Name:
        </th>
        <th>
          Started on:
          </th>
          <th>
            Tasks:
            </th>
            <th>
              Edit:
              </th>
              <% if current_user.admin? %>
              <th>
                Subprojects associated:
                </th>
              <% end %>
      </tr>
      </thead>

      <tbody>
      <% @projects.each do |p| %>
      <tr>
        <td><%= link_to p.name, project_path(p), style: "strong" %></td>
        <td><%= p.start %></td>
        <td><%= p.tasks.count %></td>
        <td><%= link_to "edit", edit_project_path(p)%></td>
        <td><% Subproject.where(id: p.subproject_ids).each do |subs| %>
              <li><%= subs.name %> | <%= subs.id %></li>
              <% end %>

        </td>
      </tr>
      <% end %>
        </tbody>


</table>

<div class="row">
<%= link_to "New Project", new_project_url, class: "btn btn-primary" %>
</div>
</div>
